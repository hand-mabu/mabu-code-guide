---
title: git规范
description: git提交相关规范明细
permalink: /gitend/git/
---

## 分支命名

分支对于一个团队或者用户来说起到标识和**版本控制**的作用。

### BRANCH

#### 自己的分支

使用 项目名称 + 下划线 + 名字缩写 或者 名字缩写 命名

> 举例： `hdm_xg` / `xg`
> 注意： 均使用小写 

#### 特殊分支

特殊分支的命名需要根据项目来定。

### TAG

使用 `tag` 完成版本控制。

大家可以注意到，一般的项目版本格式是 `1.0.0-release` 这样，简要说明一下版本的格式

以 `1.0.0` 举例:
第一位数表示项目大版本，只有出现大的功能型变更才会变更第一位数
第二位数表示小功能的变更，增加或修订了重大bug可以变更第二位数
第三位数表示功能的修复，一般一段时间修复了若干bug才会变更第三位数

我们一般提供 `release` 和 `snapshot` 两个大版本
* `release` 用于发布正式版，一般用于没有明显bug的版本
* `snapshot` 用于发布快速测试版，一般用于新功能发布测试

> 我们尽量参考 `Linux` 的发布模式，正式版用偶数的形式发出

## 提交

使用 `git` 进行提交时，要遵循如下规范:

`git` 完成一个正常的提交应该有如下操作

### 应用端

* 简要查看此次修改的内容
* 一键拉取最新代码
* 编写 `commit`
* 请求 `merge` 到 `主分支`

### 使用命令端提交(建议配合 `github desktop` 使用)

* `git status` (简要查看此次修改的内容)
* `git add .` (增加此次提交的全部内容，也可以分批次 `add`)
* `git commit -m "commit描述"` (增加此次提交的描述)
* `git pull origin master` (拉取最新代码，此操作根据具体项目操作)
* `git push origin xxx` (提交到自己的分支上去)
* 请求 `merge` 到 `主分支`

### Commit 规范

在 `git commit` 时，需要添加针对本次提交的描述，描述应该包括此次提交的动作 + 空格 + 一小段描述，详细提交动作如下:

#### 常用

##### [ADD]

新增某个功能时使用

> 举例： `git commit -m "[ADD] 新增消息推送功能"` 

##### [IMP]

基于现有的功能完成优化、修改时使用。

> 举例： `git commit -m "[IMP] 优化消息同步功能"` 

##### [FIX]

修复某块 `BUG` 时使用。

> 举例： `git commit -m "[FIX] 修复消息无法持久的bug"` 

#### 不常用

##### [INIT]

初始化某个项目、模块时使用。

> 举例： `git commit -m "[INIT] 初始化kafka模块"` 

##### [REM]

删除项目不再需要的文件或模块时使用。

> 举例： `git commit -m "[REM] 移除消息推送中不再使用的方法"` 

##### [REF]

重构项目中某块功能或模块时使用。

> 举例： `git commit -m "[REF] 重构消息消费模块"` 

## 合并主分支

依据不同项目，前面的步骤过后，需要将代码合并至**主分支**(此时代码还在自己的分支)，发起合并请求后，在描述区域写清楚此次提交全部变动，不管是给代码合并者，或是所有人一个预览的作用。

举例：

```
    1. 新增消息推送功能(StartMQ)
    2. 修复用户管理刷新的bug
    3. 优化部分代码(用户模块、消息模块)
    4. 修改数据库初始化文件
```

> 请注意在 `1.` 后面增加空格 ` `， 这样 `git` 会自动识别格式。
> 我们一般将数据库相关的变动放在结尾，书写顺序按照 初始化 -> 重构 -> 代码(新增、修改、删除) -> 代码优化 -> 代码移除 -> 数据库信息 的顺序书写。





